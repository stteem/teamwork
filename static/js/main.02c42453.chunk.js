(this.webpackJsonpteamwork=this.webpackJsonpteamwork||[]).push([[0],{45:function(e,t,a){e.exports=a(70)},53:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),l=a.n(o),i=(a(50),a(51),a(52),a(53),a(14)),s=a(15),c=a(19),u=a(16),m=a(18),d=a(72),f=a(73),p=a(74),g=a(75),h=a(76),E=a(77),O=a(17),v=a(71),b=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement(v.a,{color:"primary"}))};function y(e){var t,a=e.feed;e.gif,e.onClick;return t=a.item,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)?r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,null,a.title)),r.a.createElement(O.b,{to:"/home/".concat(a.id)},r.a.createElement(g.a,{width:"100%",src:a.item,alt:a.title}))):r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,null,a.title),r.a.createElement(h.a,null)),r.a.createElement(f.a,null,r.a.createElement(E.a,null,a.item)))}var j=function(e){var t=e.feeds.feeds.map((function(e){return r.a.createElement("div",{className:"row centreItem"},r.a.createElement("div",{key:e.id,className:"col-12 col-md-8 m-1"},r.a.createElement(y,{feed:e})))}));return e.feeds.isLoading?r.a.createElement("div",{className:"container spinner"},r.a.createElement("div",{className:"row"},r.a.createElement(b,null))):e.feeds.errMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,e.feeds.errMess))):r.a.createElement("div",{className:"container containerBorder"},t)},w=a(29),S=a(10),k=a(78),L=a(79),N=a(80),M=a(81),P=a(82),I=a(83),A=a(84),D=a(85),F=a(92),_=a(86),C=a(87),G=a(88),U=a(89),T=a(90),R=a(91),x=a(27),z=a(23),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isNavOpen:!1,isModalOpen:!1},a.toggleNav=a.toggleNav.bind(Object(S.a)(a)),a.toggleModal=a.toggleModal.bind(Object(S.a)(a)),a.handleLogin=a.handleLogin.bind(Object(S.a)(a)),a.handleLogout=a.handleLogout.bind(Object(S.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"handleLogin",value:function(e){this.toggleModal(),this.props.loginUser({email:this.email.value,password:this.password.value}),e.preventDefault()}},{key:"handleLogout",value:function(){this.props.logoutUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(k.a,{dark:!0,expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(L.a,{onClick:this.toggleNav}),r.a.createElement(N.a,{className:"mr-auto",href:"/"}),r.a.createElement(M.a,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(P.a,{navbar:!0},r.a.createElement(I.a,null,r.a.createElement(O.c,{className:"nav-link",to:"/home"},r.a.createElement("span",{className:"fa fa-home fa-lg"})," Home")),r.a.createElement(I.a,null,r.a.createElement(O.c,{className:"nav-link",to:"/aboutus"},r.a.createElement("span",{className:"fa fa-info fa-lg"})," About Us"))),r.a.createElement(P.a,{className:"ml-auto",navbar:!0},r.a.createElement(I.a,null,this.props.auth.isAuthenticated?r.a.createElement("div",null,r.a.createElement("div",{className:"navbar-text mr-3"},r.a.createElement(x.a,{icon:z.c,size:"lg"})," ",this.props.auth.user),r.a.createElement(A.a,{outline:!0,onClick:this.handleLogout},r.a.createElement("span",{className:"fa fa-sign-out fa-lg"})," Logout",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null)):r.a.createElement(A.a,{outline:!0,onClick:this.toggleModal},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Login",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null)))))),r.a.createElement(D.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row row-header"},r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("h1",null,"TeamWork"),r.a.createElement("p",null,"Inspiration comes from the little Gifs of life!"))))),r.a.createElement(F.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(_.a,{toggle:this.toggleModal},"Login"),r.a.createElement(C.a,null,r.a.createElement(G.a,{onSubmit:this.handleLogin},r.a.createElement(U.a,null,r.a.createElement(T.a,{htmlFor:"email"},"Email"),r.a.createElement(R.a,{type:"text",id:"email",name:"email",innerRef:function(t){return e.email=t}})),r.a.createElement(U.a,null,r.a.createElement(T.a,{htmlFor:"password"},"Password"),r.a.createElement(R.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(A.a,{type:"submit",value:"submit",color:"primary"},"Login")))))}}]),t}(n.Component),Q=a(93),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isArticleModalOpen:!1,isModalOpen:!1},a.toggleModal=a.toggleModal.bind(Object(S.a)(a)),a.toggleArticleModal=a.toggleArticleModal.bind(Object(S.a)(a)),a.handleGifPost=a.handleGifPost.bind(Object(S.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"toggleArticleModal",value:function(){this.setState({isArticleModalOpen:!this.state.isArticleModalOpen})}},{key:"handleGifPost",value:function(e,t){this.toggleModal(),this.props.postGif({title:this.title.value,image:t.target.files[0]}),console.log(t.target.files[0]),e.preventDefault()}},{key:"onFileInputChange",value:function(e){console.log(e.target.files[0])}},{key:"onChangeInput",value:function(e){console.log(e.target.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"container postdiv"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"articleField"}),r.a.createElement(A.a,{className:"gifbutton",onClick:this.toggleModal},r.a.createElement(x.a,{icon:z.a,style:{color:"purple"},size:"lg"}),"  Post Gif"),r.a.createElement(A.a,{className:"gifbutton",onClick:this.toggleArticleModal},r.a.createElement(x.a,{icon:z.b,style:{color:"violet"},size:"lg"}),"  Post Article"))),r.a.createElement(F.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(_.a,{toggle:this.toggleModal},"Post Gif"),r.a.createElement(C.a,null,r.a.createElement(G.a,{onSubmit:this.handleGifPost},r.a.createElement(U.a,null,r.a.createElement(T.a,{htmlFor:"title"},"Title"),r.a.createElement(R.a,{type:"text",id:"title",name:"title",innerRef:function(t){return e.title=t},onChange:this.onChangeInput})),r.a.createElement(U.a,null,r.a.createElement(T.a,{htmlFor:"image"},"Gif of Life"),r.a.createElement(Q.a,{type:"file",id:"image",name:"image",label:"Yo, pick a gif!",onChange:this.onFileInputChange}),r.a.createElement("form",{id:"upload_form",ref:"myForm",encType:"multipart/form-data"})),r.a.createElement(A.a,{type:"submit",value:"submit",color:"primary"},"Post")))),r.a.createElement(F.a,{isOpen:this.state.isArticleModalOpen,toggle:this.toggleArticleModal},r.a.createElement(_.a,{toggle:this.toggleArticleModal},"Post Article"),r.a.createElement(C.a,null,r.a.createElement(G.a,{onSubmit:this.handleArticlePost},r.a.createElement(U.a,null,r.a.createElement(T.a,{htmlFor:"title"},"Title"),r.a.createElement(R.a,{type:"text",id:"title",name:"title",innerRef:function(t){return e.title=t}})),r.a.createElement(U.a,null,r.a.createElement(T.a,{for:"article"},"Article"),r.a.createElement(R.a,{type:"textarea",name:"article",id:"article",rows:"10",innerRef:function(t){return e.article=t}})),r.a.createElement(A.a,{type:"submit",value:"submit",color:"primary"},"Post")))))}}]),t}(n.Component),W="https://secure-castle-56382.herokuapp.com/",$=a(20),H=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFeed()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(B,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser}),r.a.createElement(J,null),r.a.createElement($.d,null,r.a.createElement($.b,{path:"/home",component:function(){return r.a.createElement(j,{feeds:e.props.feed})}}),r.a.createElement($.a,{to:"/home"})))}}]),t}(n.Component),Y=Object($.g)(Object(w.b)((function(e){return{auth:e.auth,feed:e.feeds,gif:e.gif}}),(function(e){return{loginUser:function(t){return e(function(e){return function(t){return t(function(e){return{type:"LOGIN_REQUEST",creds:e}}(e)),fetch(W+"api/v1/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return console.log("response",e),e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log("error",t),t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(console.log("response.json",e),!e){var a=new Error("Error "+e.status);throw a.response=e,a}var n=localStorage.setItem("token",e.token);localStorage.setItem("user",e.firstname),console.log("storage",n),t(function(e){return{type:"LOGIN_SUCCESS",token:e.token,user:e.firstname}}(e))})).catch((function(e){return t({type:"LOGIN_FAILURE",message:e.message})}))}}(t))},logoutUser:function(){return e((function(e){e({type:"LOGOUT_REQUEST"}),localStorage.removeItem("token"),localStorage.removeItem("creds"),e({type:"LOGOUT_SUCCESS"})}))},fetchFeed:function(){e((function(e){return e({type:"FEED_LOADING"}),fetch(W+"api/v1/feed").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e({type:"FEED_LOADED",payload:t.data})})).catch((function(t){return e({type:"FEED_FAILED",payload:t.message})}))}))},postGif:function(t){return e(function(e){return function(t){t({type:"POST_GIF_LOADING"});var a=new FormData((void 0).refs.myForm);a.append("image",e);var n="Bearer "+localStorage.getItem("token");return fetch(W+"api/v1/gifs",{method:"POST",headers:{Authorization:n},body:a,credentials:"*"}).then((function(e){if(e.ok)return console.log("response",e),e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log("error",t),t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t({type:"POST_GIF_SUCCESS",payload:e})})).catch((function(e){return t({type:"POST_GIF_SUCCESS",payload:e.message})}))}}(t))}}}))(H)),q=(a(69),a(25)),K=a(24);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(K.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("user"),errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return X({},e,{isLoading:!0,isAuthenticated:!1,user:t.creds});case"LOGIN_SUCCESS":return X({},e,{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token,user:t.user});case"LOGIN_FAILURE":return X({},e,{isLoading:!1,isAuthenticated:!1,errMess:t.message});case"LOGOUT_REQUEST":return X({},e,{isLoading:!0,isAuthenticated:!0});case"LOGOUT_SUCCESS":return X({},e,{isLoading:!1,isAuthenticated:!1,token:"",user:null});default:return e}};function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(K.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,feeds:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FEED_LOADED":return te({},e,{isLoading:!1,errMess:null,feeds:t.payload});case"FEED_LOADING":return te({},e,{isLoading:!0,errMess:null,feeds:[]});case"FEED_FAILED":return te({},e,{isLoading:!1,errMess:t.payload,feeds:[]});default:return e}};function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(K.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_GIF_SUCCESS":return re({},e,{isLoading:!1,errMess:null,data:t.payload});case"POST_GIF_LOADING":return re({},e,{isLoading:!0,errMess:null,data:[]});case"POST_GIF_FAILED":return re({},e,{isLoading:!1,errMess:t.payload,data:[]});default:return e}},le=a(43),ie=a(44),se=a.n(ie),ce=Object(q.d)(Object(q.c)({auth:Z,feeds:ae,gif:oe}),Object(q.a)(le.a,se.a)),ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{store:ce},r.a.createElement(O.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(Y,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.02c42453.chunk.js.map